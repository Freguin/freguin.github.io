<html><head>
		<meta charset="UTF-8">
		<style>
  @font-face {
    font-family: 'Pixelated';
    src: url("FFFFORWA.TTF") format('truetype');
  }

</style>

<body style="background-size:cover;left: 0;position: relative;margin: 0;overflow: hidden;">
  <canvas id="canvas" width="500" height="500" tabindex="1"></canvas>
  <script>
    width = document.body.clientWidth;
    height = document.body.clientHeight;
    frameRate = 100000;
    iterate = 0;
    halfW = width / 2;
    halfH = height / 2;
    unsorted = [1];
    quux=0;

    function getRandomIntInclusive(min, max) {
	  min = Math.ceil(min);
	  max = Math.floor(max);
	  return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    for(j=2;j<=500;j++){
	index = getRandomIntInclusive(0,unsorted.length);
        unsorted.splice(index, 0, j);
    }
    iterate = unsorted.length-1;
    upTo = 0;
    window.onload = function() {
      document.getElementById('canvas').width = width;
      document.getElementById('canvas').height = height;
      c = document.getElementById('canvas').getContext('2d');
      animate = setInterval(update, 1000 / frameRate);
    }

    function update() {
      c.fillStyle = 'rgba(255,255,255,1)';
      c.fillRect(0, 0, width, height);
      console.log(upTo);
      if(iterate===upTo){
      	iterate = unsorted.length-1;
	upTo = quux;
      }
      for(i=0;i<unsorted.length;i++){
	if(i===iterate){
		c.fillStyle = 'rgba(255, 80, 80, 1)';
	}
	else if(i===iterate+1){
		c.fillStyle = 'rgba(0, 204, 255, 1)';
	}
	else {
		c.fillStyle = 'rgba(0,0,0,1)';
	}
      	c.fillRect(i*(width/unsorted.length),height-unsorted[i]*(height/unsorted.length),width/unsorted.length+1,unsorted[i]*(height/unsorted.length));
      }
      if(unsorted[iterate] > unsorted[iterate+1]){
      	foo = unsorted[iterate];
        unsorted[iterate] = unsorted[iterate+1];
        unsorted[iterate+1] = foo;
	quux = iterate;
      }
      iterate--;
      console.log(iterate);
    }

  </script>


</body>
	</html>
